<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>猜函数 - Guess the Function</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- MathJS for expression parsing and evaluation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.js"></script>
    <!-- MathLive for math input -->
    <script defer src="https://unpkg.com/mathlive"></script>
    <!-- Marked for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <div class="app-container">
        <header>
            <h1>GUESS THE FUNCTION</h1>
            <div class="game-controls">
                <button id="confirm-guess-btn" class="success">确认猜测</button>
                <button id="next-level-btn" class="primary">随机关卡</button>
                <button id="create-level-btn">创建关卡</button>
                <button id="share-btn">分享</button>
                <button id="help-btn">规则</button>
            </div>
        </header>

        <main>
            <div id="plot"></div>
            <div id="message-overlay">
                <div id="message" class="message"></div>
            </div>
        </main>

        <!-- Rules Modal -->
        <div id="rules-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>游玩规则</h2>
                    <span class="close">&times;</span>
                </div>
                <div id="markdown-rules-content" class="rules-body" style="padding: 20px; max-height: 70vh; overflow-y: auto;">
                    <p>正在加载规则...</p>
                </div>
            </div>
        </div>

        <!-- Create Level Modal -->
        <div id="create-modal" class="modal fullscreen">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>创建新关卡</h2>
                    <span class="close">&times;</span>
                </div>
                <div class="modal-body">
                    <div id="target-calculator-input"></div>
                    <div class="modal-footer">
                        <button id="save-level-btn" class="primary" style="padding: 12px 30px; font-size: 1.1rem; box-shadow: 0 4px 10px rgba(0,0,0,0.2);">生成关卡并开始</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/math-engine.js"></script>
    <script src="js/graph.js"></script>
    <script src="js/game.js"></script>
</body>
</html>
